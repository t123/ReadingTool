var _this=this,AudioPlayer=function(){function n(n){var t=this;if(this.settings=n,this.audioPlayer=document.getElementById("audioPlayer"),this.audioPlayer==null)throw"Audio player could not be initialised";this.audioPlayer.addEventListener("loadedmetadata",function(){var n=t.audioPlayer.duration;$.post(routes.reading.saveAudioLength,{textId:t.settings.textId,length:n},function(){})}),this.settings.keyBindings.autoPause&&(this.audioPlayer.addEventListener("play",function(){ui.setIsPlaying(!0),ui.setWasPlaying(!1)}),this.audioPlayer.addEventListener("pause",function(){ui.isPlaying&&ui.setWasPlaying(!0),ui.setIsPlaying(!1)}),this.audioPlayer.addEventListener("ended",function(){ui.setIsPlaying(!1),ui.setWasPlaying(!1)}))}return n.prototype.pauseAudio=function(){this.audioPlayer.pause()},n.prototype.resumeAudio=function(){this.settings.keyBindings.autoPause&&ui.getWasPlaying()&&(this.audioPlayer.currentTime=this.audioPlayer.currentTime-.5,this.audioPlayer.play())},n.prototype.increaseVolume=function(){this.audioPlayer.volume<1&&(this.audioPlayer.volume=this.audioPlayer.volume+.1)},n.prototype.decreaseVolume=function(){this.audioPlayer.volume>0&&(this.audioPlayer.volume=this.audioPlayer.volume-.1)},n.prototype.speedUpAudio=function(){this.audioPlayer.playbackRate<2&&(this.audioPlayer.playbackRate=this.audioPlayer.playbackRate+.1)},n.prototype.slowDownAudio=function(){this.audioPlayer.playbackRate>0&&(this.audioPlayer.playbackRate=this.audioPlayer.playbackRate-.1)},n.prototype.restartAudio=function(){this.audioPlayer.currentTime=0,this.audioPlayer.play()},n.prototype.rewindAudio=function(){this.audioPlayer.currentTime=this.audioPlayer.currentTime-this.settings.keyBindings.secondsToRewind},n.prototype.stopAudio=function(){this.audioPlayer.currentTime=0,this.audioPlayer.pause(),ui.setIsPlaying(!1),ui.setWasPlaying(!1)},n.prototype.fastForwardAudio=function(){this.audioPlayer.currentTime=this.audioPlayer.currentTime+this.settings.keyBindings.secondsToRewind},n.prototype.playAudio=function(){return ui.getIsPlaying()?(this.audioPlayer.pause(),!1):(this.audioPlayer.play(),!0)},n}(),NullAudioPlayer=function(){function n(){}return n.prototype.pauseAudio=function(){return},n.prototype.resumeAudio=function(){return},n.prototype.increaseVolume=function(){return},n.prototype.decreaseVolume=function(){return},n.prototype.speedUpAudio=function(){return},n.prototype.slowDownAudio=function(){return},n.prototype.restartAudio=function(){return},n.prototype.rewindAudio=function(){return},n.prototype.stopAudio=function(){return},n.prototype.fastForwardAudio=function(){return},n.prototype.playAudio=function(){return!0},n}()