var Class=function(){function n(){}return n}(),Dictionary=function(){function n(){}return n}(),KeyBindings=function(){function n(){this.autoPause=!0,this.controlsEnabled=!0}return n}(),Settings=function(){function n(){this.classes=new Class,this.keyBindings=new KeyBindings}return n}(),ReadingToolUi=function(){function n(n){this.isPlaying=!1,this.wasPlaying=!1,this.hasChanged=!1,this.settings=n,this.audio=n.hasAudio?new AudioPlayer:new NullAudioPlayer}return n.prototype.toggleL1=function(){var n=$("#toggleL1").parent("li");n.hasClass("active")?(n.removeClass("active"),this.closeTextModal(),$("#textContent td.s").length>0?$("#textContent table td.f span").hide():$("#textContent p span").hide()):(n.addClass("active"),$("td.f p span").show())},n.prototype.toggleL2=function(){var n=$("#toggleL2").parent("li");n.hasClass("active")?(n.removeClass("active"),this.closeTextModal(),$("td.s p span").hide()):(n.addClass("active"),$("td.s p span").show())},n.prototype.toggleQuickmode=function(){var n=$("#quickmode").parent("li");this.settings.quickmode=!this.settings.quickmode,this.settings.quickmode?n.addClass("active"):n.removeClass("active")},n.prototype.openTextModal=function(n,t){if((n||this.settings.modalBehaviour=="Rollover")&&!this.settings.quickmode){if(this.modalVisible){this.closeTextModal();return}if(!$(this).hasClass(this.settings.classes.punctuationClass)&&!$(this).hasClass(this.settings.classes.spaceClass)){if(n){switch(this.settings.modalBehaviour){case"LeftClick":if(t.which!=1)return;if(t.altKey||t.shiftKey||t.ctrlKey)return;break;case"CtrlLeftClick":if(t.which!=1||!t.ctrlKey)return;if(t.altKey||t.shiftKey)return;break;case"ShiftLeftClick":if(t.which!=1||!t.shiftKey)return;if(t.altKey||t.ctrlKey)return;break;case"MiddleClick":if(t.which!=2)return;if(t.altKey||t.shiftKey||t.ctrlKey)return;break;case"RightClick":if(t.which!=3)return;if(t.altKey||t.shiftKey||t.ctrlKey)return;break;default:return}if(this.settings.quickmode){this.reading=new Reading($(this),this.settings),$(this).hasClass(this.settings.classes.notseenClass);return}}this.isPlaying&&(this.wasPlaying=!0),this.isPlaying&&this.settings.keyBindings.autoPause&&this.audio.pauseAudio(),this.reading=new Reading($(this),this.settings),selectedWord=new SelectedWord(t.srcElement),modal.modal("show")}}},n.prototype.closeTextModal=function(){modal.modal("hide")},n}(),SelectedWord=function(){function n(n){this.element=n,this.length=length,this.init(),this.updateModalDisplay()}return n.prototype.init=function(){this.selectedWord=$(this.element).html()},n.prototype.updateModalDisplay=function(){$("#selectedWord").html(this.selectedWord)},n.prototype.saveChanges=function(){console.log("save changes")},n.prototype.resetWord=function(){console.log("reset word")},n.prototype.refreshSentence=function(){console.log("refresh sentence")},n}(),modal,selectedWord;$("#toggleL1").click(function(){return ui.toggleL1(),!1}),$("#toggleL2").click(function(){return ui.toggleL2(),!1}),$("#quickmode").click(function(){return ui.toggleQuickmode(),!1}),$("#btnSaveAndClose").click(function(){selectedWord.saveChanges(),ui.closeTextModal()}),$("#btnReset").click(function(){selectedWord.resetWord()}),$("#btnRefresh").click(function(){selectedWord.refreshSentence()}),$(function(){if(ui.settings.modalBehaviour=="Rollover")$("#textContent p span span").on("mouseenter",function(n){ui.openTextModal(!1,n)});else{$("#textContent p span span").bind("contextmenu",function(){return ui.settings.modalBehaviour!="RightClick"});$("#textContent p span span").on("mousedown",function(n){ui.openTextModal(!0,n)})}modal=$("#myModal");modal.on("show",function(){ui.modalVisible=!0,modal.show()});modal.on("hide",function(){console.log("hide"),modal.hide(),ui.modalVisible=!1,ui.audio.resumeAudio(ui.settings.keyBindings.autoPause,ui.wasPlaying)});modal.modal({show:!1,keyboard:!0,backdrop:!1})}),$(document).keyup(function(n){var t=n.keyCode?n.keyCode:n.which;ui.modalVisible&&(t==27?ui.closeTextModal():n.ctrlKey&&t==13&&(selectedWord.saveChanges(),ui.closeTextModal()))})