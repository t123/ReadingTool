@using ReadingTool.Entities
@using ReadingTool.Site.Helpers
@{
    var user = HttpContext.Current.User.Identity as UserIdentity;
    
    if(user==null)
    {
        Bundles.Reference("Content/themes/default/bootstrap.css");
        Bundles.Reference("Content/themes/default/site.less");
    }
    else
    {
        Bundles.Reference("Content/themes/" + user.Theme + "/bootstrap.css");
        Bundles.Reference("Content/themes/" + user.Theme + "/site.less");
    }
    
    Bundles.Reference("Scripts/required/jquery-1.8.3.js");
    Bundles.AddInlineScript(
        @<script type="text/javascript">
            $.ajaxSetup({ scriptCharset: "utf-8", contentType: "application/x-www-form-urlencoded; charset=UTF-8" });
            $.ajaxSettings.traditional = true;
            $.ajaxSetup({ type: "post" });
            $('.tip').tooltip();
        </script>
        , "body");
}
<!DOCTYPE html>

<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width" />
        @Bundles.RenderStylesheets()
        @Bundles.RenderStylesheets("head")
        @Bundles.RenderScripts()
        <title>SITE - @ViewBag.Title</title>
        @Bundles.RenderScripts("head")
    </head>
<body>
    <div class="navbar navbar-static-top navbar-inverse">
        <div class="navbar-inner">
            <ul class="nav">
                @if(HttpContext.Current.User.Identity.IsAuthenticated && user != null)
                {
                    <li><a href="@Url.Action("Index", "~~User.MyAccount")">@user.Name</a></li>
                    <li><a href="@Url.Action("", "~~Home")">home</a></li>
                    <li><a href="@Url.Action("Index", "~~User.MyAccount")">my account</a></li>
                    <li><a href="@Url.Action("Index", "~~User.Languages")">my languages</a></li>
                    <li><a href="@Url.Action("Index", "~~User.Texts")">my texts</a></li>
                    <li class="divider-vertical"></li>
                    if(HttpContext.Current.User.IsInRole(ReadingTool.Core.Constants.Roles.ADMIN))
                    {
                        <li><a href="@Url.Action("", "~~Admin.Home")">admin</a></li>
                    }
                    <li><a href="@Url.Action("SignOut", "~~Account")">sign out</a></li>
                }
                else
                {
                    <li><a href="@Url.Action("", "~~Home")">home</a></li>
                    <li><a href="@Url.Action("SignIn", "~~Account")">sign in</a></li>
                    <li><a href="@Url.Action("SignUp", "~~Account")">sign up</a></li>
                }
            </ul>
        </div>
    </div>
    @RenderSection("Menu", false)

    <div class="container-fluid">
        @Html.Flash()
        <div class="clr10"></div>
        @RenderBody()
    </div>
    
    @Bundles.RenderScripts("body")
</body>
</html>
