@using ReadingTool.Entities
@using ReadingTool.Site.Helpers
@using StackExchange.Profiling
@{
    StackExchange.Profiling.MiniProfiler.Settings.UseExistingjQuery = true;
    this.InitClientTimings();
    var user = HttpContext.Current.User.Identity as UserIdentity;
    Bundles.Reference("Content/themes/common.less");
    
    if(user==null)
    {
        Bundles.Reference("Content/themes/default/bootstrap.css");
        Bundles.Reference("Content/themes/default/site.less");
    }
    else
    {
        Bundles.Reference("Content/themes/" + user.Theme + "/bootstrap.css");
        Bundles.Reference("Content/themes/" + user.Theme + "/site.less");
    }
    
    Bundles.Reference("Scripts/required/jquery-1.8.3.js");
    Bundles.AddInlineScript(
        @<script type="text/javascript">
            $.ajaxSetup({ scriptCharset: "utf-8", contentType: "application/x-www-form-urlencoded; charset=UTF-8" });
            $.ajaxSettings.traditional = true;
            $.ajaxSetup({ type: "post" });
            $('.tip').tooltip();
        </script>
        , "body");
}
<!DOCTYPE html>

<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width" />
        
        @Bundles.RenderStylesheets()
        @Bundles.RenderStylesheets("head")
        @Bundles.RenderScripts()
        <title>ReadingTool - @ViewBag.Title</title>
        @Bundles.RenderScripts("head")
    </head>
<body>
    @Html.Partial("_Navigation")
    @RenderSection("Menu", false)

    <div class="container-fluid">
        @Html.Flash()
        <div class="clr10"></div>
        @RenderBody()
        <div class="clr50"></div>
    </div>
    
    @Bundles.RenderScripts("body")
    @*@MiniProfiler.RenderIncludes()*@
</body>
</html>
<!--© @DateTime.Now.Year released under the AGPL-->