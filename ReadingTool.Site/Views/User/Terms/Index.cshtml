@using ReadingTool.Core.FilterParser
@{
    ViewBag.Title = "Index";
    
    Bundles.Reference("Scripts/other/footer/webgrid/grid.js");

    Bundles.AddInlineScript(
    @<text>
         <script language="javascript">
             var state;
             var storageKey = "term_filter";
             var gridPostUrl = '@Url.Action("IndexGrid")';
             $(document).ready(function () {
                 var jsonState = localStorage[storageKey];

                 if (jsonState == null || jsonState == undefined) {
                     state = newState();
                 } else {
                     state = JSON.parse(jsonState);
                 }

                 $('#filter').val(state.filter);
                 $('#searchhelp').popover({ html: true });

                 updateGrid();
             });
         </script>
    </text>, "body");
}

@{
    var text  = @"Just type to start filtering by language and term phrase. You can search for your own tags by 
using a # sign, or use some of these special tags: " + string.Join(", ", FilterParser.MagicTermTags.Select(x => "<strong>#" + x + "</strong>"));
}
<div class="filterbar">
    <input type="text" name="filter" id="filter" class="input-xxlarge" placeholder="type to search, use # to search for tags">
    <a href="#" onclick="reset(false)">
        <i class=" icon-remove" title="clear text filter"> </i>
    </a>
    
    <a href="#" onclick="reset(true)">
        <i class=" icon-refresh" title="clear the text filter, sort by and sort direction filter"> </i>
    </a>
    
    <a id="searchhelp" href="#" rel="popover" data-content="@text" data-title="Filtering Help">
        <i class=" icon-question-sign" title=""> </i>
    </a>
</div>
<div id="grid"></div>
@section Menu
{
    @Html.Partial("Partials/_menu", null, ViewData)
}

<div class="clr50"></div>