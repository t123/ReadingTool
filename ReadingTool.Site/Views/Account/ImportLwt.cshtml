@model ReadingTool.Site.Models.Account.ImportModel
@{
    ViewBag.Title = "My Account";
}

@Html.FlashMessage("<strong>Always</strong> try the test mode first.", FlashHelper.Level.Alert, false)

<div class="row-fluid">
    <div class="span12">
        <div class="well well-small">
            <p>
                There is a <strong>2 MB limit</strong> on the size of the file. If your exported file is larger than this you must ZIP it first. 
                The ZIP file must only contain the exported data. You can ZIP your file if you want to speed up the upload as well.
            </p>
            <p>
                If you have direct access to your LWT server you can export your data from there and import it here. 
                
                <ol>
                    <li>Download <a href="@Url.Content("~/content/jsonexport.php.txt")">this script</a> and remove the .txt extension, so the filename becomes <strong>jsonexport.php</strong>
                    </li>
                    <li>Upload it to your LWT server.
                    </li>
                    <li>Go to http://www.example.org/jsonexport.php (replace example.org with your server for example http://localhost/jsonexport.php if on your personal computer). This will start a download of all your data.
                    </li>
                    <li>When it's finished delete the <strong>jsonexport.php</strong> file, otherwise anyone will be able to download your data.
                    </li>
                    <li>Either upload the file below or if it's larger than 2MB, ZIP it first and then upload the ZIP file.
                    </li>
                </ol>
            </p>
        </div>
        @using(Html.BeginForm("ImportLwt", "Account", FormMethod.Post, new { @class = "form-horizontal", enctype = "multipart/form-data" }))
        {
            @Html.AntiForgeryToken()
            <fieldset>
                <legend>Import your LWT data</legend>
                <div class="control-group">
                    @Html.LabelFor(x => x.File, new { @class = "control-label" })
                    <div class="controls">
                        <input type="file" name="file" />
                        @Html.TipFor(x => x.File)
                        @Html.ValidationMessageFor(x => x.File)
                    </div>
                </div>
                <div class="control-group">
                    @Html.LabelFor(x => x.TestMode, new { @class = "control-label" })
                    <div class="controls">
                        @Html.CheckBoxFor(x => x.TestMode)
                        @Html.TipFor(x => x.TestMode)
                        @Html.ValidationMessageFor(x => x.TestMode)
                    </div>
                </div>
                <div class="form-actions">
                    <button type="submit" class="btn btn-primary">Import your data</button>
                    <a href="@Url.Action("Index")" class="btn">Back to your account</a>
                </div>
            </fieldset>
        }
    </div>
</div>