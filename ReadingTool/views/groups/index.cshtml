@{
    ViewBag.Title = "Groups";
}
@section submenu { @Html.Partial("_menu") }
@section styles {
    <link href="@AppHelper.CssUrl("markdowndeep/mdd_styles.css")" rel="stylesheet" type="text/css" media="screen, projection"/>
    <link href="@AppHelper.CssUrl("site/jquery-ui-1.8.17.custom.css")" rel="stylesheet" type="text/css" media="screen, projection"/>
}
@section bottomJS
{
    <script language="javascript" type="text/javascript">
        var settings = {
            url: '@(Html.BuildUrlFromExpression<AjaxGroupsController>(x=>x.Index()))',
            groupUrl: '@((ViewData[CacheKeys.URLS] as UrlModel).Groups)',
            afToken: $('#afForm input[name=__RequestVerificationToken]').val()
        };
        var groups = new groupsVM(settings);
    </script>
}
<div id="wrapper">
    <div id="leftbar">
        <strong style="padding-left:20px">Filters</strong>
        <div class="clr5"></div><hr /><div class="clr5"></div>
        <input type="text" style="margin-left: 10px; width: 120px" name="filter" data-bind="value: textFilter, valueUpdate: 'afterkeydown'" />
        <div class="clr5"></div><hr /><div class="clr5"></div>
        <ul class="ffolder">
            @foreach(var folder in FilterKeys.GroupNames)
            {
                <li>
                    <div style="width:100%">
                        <span>@folder</span>
                        <div style="float: right; width: 15px">
                            <input type="checkbox" name="folders" value="@folder" data-bind="checked: selectedFolders"/>
                        </div>
                    </div>
                </li>
            }
        </ul>
    </div>
    <div id="main">
        <table class="texts" width="100%" cellspacing="0" cellpadding="0">
            <thead>
                <tr>
                    <th>Name</th>
                    <th style="width: 250px">Association</th>
                    <th style="width:25px">&nbsp;</th>
                    <th style="width:25px">&nbsp;</th>
                    <th style="width:25px">&nbsp;</th>
                    <th style="width:25px">&nbsp;</th>
                </tr>
            </thead>
            <tbody data-bind="foreach: items">
                <tr>
                    <td><span data-bind="text: name"></span> <span data-bind="text: pending"></span></td>
                    <td data-bind="text: association"></td>
                    <td><a data-bind="visible: canView, attr: { href: settings.groupUrl + '/view/' + id }" class="sprite sprite-read" title="view">view</a></td>
                    <td><a data-bind="visible: canEdit, attr: { href: settings.groupUrl + '/edit/' + id }" class="sprite sprite-edit" title="edit">edit</a></td>
                    <td><a data-bind="visible: canManage, attr: { href: settings.groupUrl + '/manage/' + id }" class="sprite sprite-users" title="manage users">users</a></td>
                    <td><a data-bind="visible: canInfo, attr: { href: settings.groupUrl + '/viewinfo/' + id }" class="sprite sprite-info" title="info">info</a></td>
                </tr>
            </tbody>
            <tfoot>
                <tr>
                    <th colspan="6">
                        <ul class="lra" style="padding-left:6px" >
                            <li class="current first" data-bind="text: 'Showing Page: ' + currentPage() + ' of ' + totalPages()"></li>
                            <li class="current" data-bind="text: 'Total Groups: ' + totalItems()"></li>
                            <!-- ko foreach: paging -->
                            <li><a href="#" data-bind="text: $data, style: { color: $parent.currentPage()===$data ? 'black' : 'blue' }, click: $parent.changePage"></a></li>
                            <!-- /ko -->
                        </ul>
                    </th>
                </tr>
            </tfoot>
        </table>
    </div>
</div>
<form action="#" id="afForm" style="display:none">@Html.AntiForgeryToken()</form>
@section footer { }