@model ProfileModel
@{
    ViewBag.Title = "Your Account";
}
@section submenu {
    @Html.Partial("_menu")
}
@section styles {
    <link href="@AppHelper.CssUrl("site/jquery-ui-1.8.17.custom.css")" rel="stylesheet" type="text/css" media="screen, projection"/>
}

@{
    using(Html.BeginForm<MyAccountController>(x => x.Index(), FormMethod.Post))
    {
    @Html.AntiForgeryToken()
    <div style="height: 100px;">
        <div style="float: left; width: 100px; height: 100px; margin-left: 20px;">
            @{
                if(!string.IsNullOrWhiteSpace(Model.EmailAddressMD5))
                {
                    <img src="@string.Format("http://www.gravatar.com/avatar/{0}?s=80&d=mm", Model.EmailAddressMD5)" width="80" height="80" title="@Model.Fullname" alt="Your Gravatar"/>
                }
                else
                {
                    <img src="http://www.gravatar.com/avatar/?s=80&d=mm" width="80" height="80" title="Get your Gravatar" alt="Gravatar"/>
                }
            }
            <div class="clr"></div>
            <a href="http://www.gravatar.com" target="_blank">(change)</a>
        </div>
        <div style="float: left; height: 100px;">
            <legend>
                @Model.Username
                <div class="clr5"></div>
                <span style="font-size:12px;">member since @Html.FormatDate(@Model.Created, "dd MMMM yyyy")</span>
            </legend>
        </div>
    </div>
        <div class="clr5"></div>
        <div class="input_wrapper">
            @Html.LabelHelpFor(x => x.NativeLanguage)
            @Html.TextBoxFor(x => x.NativeLanguage)
            @Html.ValidationMessageFor(x => x.NativeLanguage)
        </div>
    
        <div class="input_wrapper">
            @Html.LabelHelpFor(x => x.DisplayName)
            @Html.TextBoxFor(x => x.DisplayName)
            @Html.ValidationMessageFor(x => x.DisplayName)
        </div>
    
        <div class="input_wrapper">
            @Html.LabelHelpFor(x => x.EmailAddress)
            @Html.TextBoxEmailAddressFor(x => x.EmailAddress, new { @autocomplete = "off" })
            @Html.ValidationMessageFor(x => x.EmailAddress)
        </div>
    
        <div class="input_wrapper">
            @Html.LabelHelpFor(x => x.ReceiveMessages)
            @Html.CheckBoxFor(x => x.ReceiveMessages)
            @Html.ValidationMessageFor(x => x.ReceiveMessages)
        </div>
    
        <div class="input_wrapper">
            @Html.LabelHelpFor(x => x.ShareWords)
            @Html.CheckBoxFor(x => x.ShareWords)
            @Html.ValidationMessageFor(x => x.ShareWords)
        </div>
    
    <div class="clr10"></div>
    <p class="notice">
        If you want to change your password please fill in the section below, otherwise
        leave it blank.
    </p>
    <div class="input_wrapper">
        @Html.LabelHelpFor(x => x.CurrentPassword)
        @Html.PasswordFor(x => x.CurrentPassword, new { @autocomplete = "off" })
        @Html.ValidationMessageFor(x => x.CurrentPassword)
    </div>
    
    <div class="input_wrapper">
        @Html.LabelHelpFor(x => x.UnencryptedPassword)
        @Html.PasswordFor(x => x.UnencryptedPassword, new { @autocomplete = "off" })
        @Html.ValidationMessageFor(x => x.UnencryptedPassword)
    </div>
    
    <div class="input_wrapper">
        @Html.LabelFor(x => x.ConfirmPassword)
        @Html.PasswordFor(x => x.ConfirmPassword, new { @autocomplete = "off" })
        @Html.ValidationMessageFor(x => x.ConfirmPassword)
    </div>
    <button type="submit">
        <span>update profile</span>
    </button>
    }
}
@section bottomJS {
    <script language="javascript" type="text/javascript">
        new uiHelper({
            urls: { ajaxUrl: '@((ViewData[CacheKeys.URLS] as UrlModel).Ajax.Base)' },
            autocomplete: [{ name: '#NativeLanguage', length: 2, endpoint: 'autocompletesystemlanguagename'}]
        });
    </script>
}