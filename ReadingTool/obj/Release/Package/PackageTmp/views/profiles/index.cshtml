@using ReadingTool.Entities.Identity
@model PublicProfileViewModel
           
@{
    ViewBag.Title = "Profile";
    var owner = ViewBag.Owner ?? false;
    var user = HttpContext.Current.User.Identity as UserIdentity;
}
@section styles {
    <link href="@AppHelper.CssUrl("markdowndeep/mdd_styles.css")" rel="stylesheet" type="text/css" media="screen, projection"/>
}

@if(owner)
{
    <p class="notice">
        This is your profile and is always available for you to see. This is how your profile currently appears to people who have permission to see it.
    </p>
}
<div class="clr10"></div>
<div>
    <div style="float: left; width: 100px; height: 100px; margin-left: 20px;">
        @{
            if(!string.IsNullOrWhiteSpace(Model.EmailAddressMD5))
            {
                <img src="@string.Format("http://www.gravatar.com/avatar/{0}?s=80&d=mm", Model.EmailAddressMD5)" width="80" height="80" title="@Model.Fullname" alt="Gravatar for @Model.Fullname"/>
            }
            else
            {
                <img src="http://www.gravatar.com/avatar/?s=80&d=mm" width="80" height="80" title="@Model.Fullname" alt="Gravatar for @Model.Fullname"/>
            }
        }
    </div>
    <div class="profile">
        <div class="block">
            <div class="label">Name</div>
            <span>@Model.Fullname</span>
            @if(user!=null && Model.ReceiveMessages)
            {
                <text>&nbsp;(</text>@(Html.ActionLink<MessagesController>(x=>x.Send(Model.Username), "send message"))<text>)</text>
            }
        </div>
        <div class="clr10"></div>

        <div class="block">
            <div class="label">Member since</div>
            <span>@Html.FormatTimespan(Model.Joined) ago</span>
        </div>
        <div class="clr10"></div>
        
        @if(Model.ShowNativeLanguage && !string.IsNullOrEmpty(Model.NativeLanguage))
        {
            <div class="block">
                <div class="label">Native/Main Language</div>
                <span>@Model.NativeLanguage</span>
            </div>
            <div class="clr10"></div>
        }

        @if(!string.IsNullOrEmpty(Model.Location))
        {
            <div class="block">
                <div class="label">Location</div>
                <span>@Model.Location</span>
            </div>
            <div class="clr10"></div>
        }
        
        @if(!string.IsNullOrEmpty(Model.TwitterUrl))
        {
            <div class="block">
                <div class="label">Twitter</div>
                <span>
                    <a href="@Model.TwitterUrl" rel="nofollow" target="_blank">@Model.TwitterUrl</a>
                    <a  href="@Model.TwitterUrl" rel="nofollow" target="_blank" style="text-decoration:none; background-color: white;">
                        <img src="@AppHelper.ImageUrl("twitter16.png")" alt="Twitter" title="Twitter" />
                    </a>
                </span>
            </div>
            <div class="clr10"></div>
        }
        
        @if(!string.IsNullOrEmpty(Model.WebsiteUrl))
        {
            <div class="block">
                <div class="label">Website</div>
                <span><a href="@Model.WebsiteUrl" rel="nofollow" target="_blank">@Model.WebsiteUrl</a></span>
            </div>
            <div class="clr"></div>
        }

        @if(!string.IsNullOrEmpty(Model.AboutMe))
        {
            <div class="block">
                <div class="label" style="padding-top: 10px">About Me</div>
                <div style="display: inline-block; margin-left: 0px;" class="mdd_preview">@Html.Raw(Model.AboutMe)</div>
            </div>
            <div class="clr10"></div>
        }
    </div>
</div>