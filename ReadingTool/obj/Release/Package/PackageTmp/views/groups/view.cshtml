@model GroupModel
@{
    ViewBag.Title = "Group Texts & Videos";
}
@section submenu { @Html.Partial("_menu") }
@section styles
{
    <link href="@AppHelper.CssUrl("site/jquery-ui-1.8.17.custom.css")" rel="stylesheet" type="text/css" media="screen, projection"/>
}
@section bottomJS
{
    <script language="javascript" type="text/javascript">
        new uiHelper({
            urls: { ajaxUrl: '@((ViewData[CacheKeys.URLS] as UrlModel).Ajax.Base)' }
        });

        var settings = {
            url: '@((ViewData[CacheKeys.URLS] as UrlModel).Ajax.Groups)',
            groupUrl: '@((ViewData[CacheKeys.URLS] as UrlModel).Groups)',
            afToken: $('#afForm input[name=__RequestVerificationToken]').val(),
            groupId: '@Model.GroupId'
        };
        
        var gvvm = new groupViewVM(settings);
    </script>
}
<div id="wrapper">
    <div id="leftbar">
        <div style="height:30px">
            <strong style="padding-left:20px">Filters</strong>
        </div>
        <hr /><div class="clr5"></div>
        <select style="margin-left: 10px; width: 120px" data-bind="options: limits, value: limit"></select>
        <div class="clr5"></div><hr /><div class="clr5"></div>
        <input type="text" style="margin-left: 10px; width: 120px" name="filter" data-bind="value: textFilter, valueUpdate: 'afterkeydown'" />
        <div class="clr5"></div><hr /><div class="clr5"></div>
        <ul class="ffolder">
            @foreach(var folder in FilterKeys.GroupSearch)
            {
                <li>
                    <div style="width:100%">
                        <span>@folder</span>
                        <div style="float: right; width: 15px">
                            <input type="checkbox" name="folders" value="@folder" data-bind="checked: selectedFolders"/>
                        </div>
                    </div>
                </li>
            }
        </ul>
    </div>
    <div id="main">
        <div style="height:30px">
            <ul class="top">
                <li>
                    <a href="@(Html.BuildUrlFromExpression<GroupsController>(x=>x.Rss(Model.GroupId.ToString())))" title="rss feed" class="spritetop spritestop-rss"></a>
                </li>
                <li>
                    <strong>@Model.Name</strong>
                </li>
            </ul>
            
        </div>
        <table class="texts" width="100%" cellspacing="0" cellpadding="0">
            <thead>
                <tr>
                    <th style="width:175px">Language</th>
                    <th>Title</th>
                    <th>Collection</th>
                    <th style="width:25px">No</th>
                    <th style="width:25px">&nbsp;</th>
                    <th style="width:25px">&nbsp;</th>
                </tr>
            </thead>
            <tbody data-bind="foreach: items">
                <tr>
                    <td>
                        <span data-bind="text: language"></span>
                    </td>
                    <td>
                        <a data-bind="visible: isText && hasAudio" class="sprite sprite-hasmusic" title="has audio">has audio</a>
                        <a data-bind="visible: isText && hasAudio===false" class="sprite sprite-nomusic" title="has no audio">has no audio</a>
                        <span data-bind="text: title"></span>
                    </td>
                    <td data-bind="text: collectionName"></td>
                    <td data-bind="text: collectionNo"></td>
                    <td>
                        <a data-bind="visible: isText, attr: { href: settings.groupUrl + '/read/' + id + '/' + settings.groupId }" class="sprite sprite-read" title="read">read</a>
                        <a data-bind="visible: isText===false, attr: { href: settings.groupUrl + '/watch/' + id + '/' + settings.groupId}" class="sprite sprite-watch" title="watch">watch</a>
                    </td>
                    <td>
                        <a data-bind="visible: isText && isParallelText, attr: { href: settings.groupUrl + '/readparallel/' + id + '/' + settings.groupId }" class="sprite sprite-readparallel" title="read parallel">parallel</a>
                    </td>
                </tr>
            </tbody>
            <tfoot>
                <tr>
                    <th colspan="10">
                        <ul class="lra" style="padding-left:6px" >
                            <li class="current first" data-bind="text: 'Showing Page: ' + currentPage() + ' of ' + totalPages()"></li>
                            <li class="current" data-bind="text: 'Total Texts & Videos: ' + totalItems()"></li>
                            <!-- ko foreach: paging -->
                            <li><a href="#" data-bind="text: $data, style: { color: $parent.currentPage()===$data ? 'black' : 'blue' }, click: $parent.changePage"></a></li>
                            <!-- /ko -->
                        </ul>
                    </th>
                </tr>
            </tfoot>
        </table>
    </div>
</div>
<form action="#" id="afForm" style="display:none">@Html.AntiForgeryToken()</form>
@section footer { }