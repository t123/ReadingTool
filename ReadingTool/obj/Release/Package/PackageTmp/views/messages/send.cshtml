@model MessageModel
@{
    ViewBag.Title = "Send Message";
}
@section submenu {
    @Html.Partial("_menu")
}
@section styles {
    <link href="@AppHelper.CssUrl("markdowndeep/mdd_styles.css")" rel="stylesheet" type="text/css" media="screen, projection"/>
    <link href="@AppHelper.CssUrl("site/jquery-ui-1.8.17.custom.css")" rel="stylesheet" type="text/css" media="screen, projection"/>
}
@section topJS
{
    <script src="@AppHelper.ScriptUrl("markdowndeep/MarkdownDeepLib.min.js")" type="text/javascript" language="javascript"></script>
}
@{
    using (Html.BeginForm<MessagesController>(x => x.Send(""), FormMethod.Post))
    {
    @Html.AntiForgeryToken()
    <legend>Send Message</legend>
    <div class="input_wrapper">
        @Html.LabelHelpFor(x => x.To)
        @Html.EditorFor(x => x.To, new { @class = "to" })
        @Html.ValidationMessageFor(x => x.To)
    </div>
    
    <div class="input_wrapper">
        @Html.LabelHelpFor(x => x.Subject)
        @Html.EditorFor(x => x.Subject)
        @Html.ValidationMessageFor(x => x.Subject)
    </div>
        <div class="clr10"></div>
    <div class="input_wrapper">
        @Html.LabelHelpFor(x => x.Body)
        @Html.TextAreaFor(x => x.Body, new { @class = "mdd_editor" })
    </div>
    
    <button type="submit">
        <span>send message</span>
    </button>
    }
}
@section bottomJS
{
    <script language="javascript" type="text/javascript">
        $(document).ready(function () {
            $("textarea.mdd_editor").MarkdownDeep({
                help_location: "/scripts/markdowndeep/mdd_help.htm",
                ExtraMode: true
            });
        });

        new uiHelper({
            urls: { ajaxUrl: '@((ViewData[CacheKeys.URLS] as UrlModel).Ajax.Base)' },
            tags: [{ name: '#To', endpoint: 'autocompleteusernames'}]
        });
    </script>
}
@section footer { }